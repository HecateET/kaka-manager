<template>
  <div>
    <div>
      <el-breadcrumb separator-class="el-icon-arrow-right" class="bread">
        <el-breadcrumb-item :to="{ path: '/control' }"><i class="el-icon-upload"></i>&nbsp;æ§åˆ¶å°</el-breadcrumb-item>
        <el-breadcrumb-item>å†…å®¹ç®¡ç†</el-breadcrumb-item>
        <el-breadcrumb-item>å•†å“å‘å¸ƒ</el-breadcrumb-item>
      </el-breadcrumb>
    </div>
    <hr>
    <div style="margin: 20px">å•†å“ç±»æ´»åŠ¨å‘å¸ƒ</div>
    <div class="form-box">
      <el-form ref="form" :model="activityEdit" label-width="80px" size="mini">
        <el-form-item label="æ–‡ç« åç§°">
          <el-input v-model="activityEdit.title"></el-input>
        </el-form-item>
        <el-form-item label="æ–‡ç« ç±»å‹">
          <el-select v-model="activityEdit.type" placeholder="è¯·é€‰æ‹©å‘å¸ƒæ´»åŠ¨çš„ç±»å‹">
            <el-option label="å…¬å‘Šç±»" value="å…¬å‘Š"></el-option>
          </el-select>
        </el-form-item>
        <el-form-item label="å‘å¸ƒæ—¶é—´">
          <el-col :span="11">
            <el-date-picker type="datetime" placeholder="é€‰æ‹©æ—¥æœŸ" v-model="activityEdit.date" style="width: 100%;"></el-date-picker>
          </el-col>
        </el-form-item>
        <el-form-item>
          <div style="height: 200px;">
            <el-upload
              class="avatar-uploader"
              action="https://jsonplaceholder.typicode.com/posts/"
              :show-file-list="false"
              :on-success="handleAvatarSuccess"
              :before-upload="beforeAvatarUpload">
              <img v-if="imageUrl" :src="imageUrl" class="avatar">
              <i v-else class="el-icon-plus avatar-uploader-icon"></i>
            </el-upload>
          </div>

        </el-form-item>
      </el-form>
    </div>
    <hr>
    <div>
      <div ref="editor" style=" width: 700px;text-align:left"></div>
    </div>
    <hr>
    <!--<el-row>-->
      <!--<el-button v-on:click="publish()" type="primary">å‘å¸ƒ</el-button>-->
      <!--<el-button v-on:click="cancelPublish()" type="danger">å–æ¶ˆ</el-button>-->
    <!--</el-row>-->
  </div>
</template>

<script>
  import E from  'wangeditor'
    export default {
        name: "ManagerCommodity",
      data(){
          return{
            editorContent:'',
            activityEdit: {
              title: '',
              type: 'å…¬å‘Š',
              date: '',
            },
            imageUrl: ''
          }
      },
      methods:{
        //åˆ›å»ºå¯Œæ–‡æœ¬ç¼–è¾‘å™¨
        createEdioter(){
          var editor = new E(this.$refs.editor);
          editor.customConfig.onchange = (html)=>{
            this.editorContent = html;
          };
          editor.customConfig.colors = [
            '#000000',
            '#eeece0',
            '#1c487f',
            '#4d80bf',
            '#c24f4a',
            '#8baa4a',
            '#7b5ba1',
            '#46acc8',
            '#f9963b',
            '#ffffff',
            '#DB70DB',
            '#cc1d18'
          ];
          // è¡¨æƒ…é¢æ¿å¯ä»¥æœ‰å¤šä¸ª tab ï¼Œå› æ­¤è¦é…ç½®æˆä¸€ä¸ªæ•°ç»„ã€‚æ•°ç»„æ¯ä¸ªå…ƒç´ ä»£è¡¨ä¸€ä¸ª tab çš„é…ç½®
          editor.customConfig.emotions = [
            {
              // tab çš„æ ‡é¢˜
              title: 'é»˜è®¤',
              // type -> 'emoji' / 'image'
              type: 'image',
              // content -> æ•°ç»„
              content: [
                {
                  alt:'[åƒç“œ]',
                  src:`${this.$store.state.baseURL}/eoim/1.png`
                },
                {
                  alt:'[å“­ç¬‘]',
                  src:`${this.$store.state.baseURL}/eoim/2.png`
                },
                {
                  alt:'[åç¬‘]',
                  src:`${this.$store.state.baseURL}/eoim/3.png`
                },
                {
                  alt:'[è‹¦ç¬‘]',
                  src:`${this.$store.state.baseURL}/eoim/4.png`
                },
                {
                  alt:'[å˜´é¦‹]',
                  src:`${this.$store.state.baseURL}/eoim/5.png`
                },
                {
                  alt:'[ä½ å¥½]',
                  src:`${this.$store.state.baseURL}/eoim/6.png`
                },
                {
                  alt:'[å³å“¼å“¼]',
                  src:`${this.$store.state.baseURL}/eoim/7.png`
                },
                {
                  alt:'[å·¦å“¼å“¼]',
                  src:`${this.$store.state.baseURL}/eoim/8.png`
                },
                {
                  alt:'[åƒç“œ]',
                  src:`${this.$store.state.baseURL}/eoim/9.png`
                },
                {
                  alt:'[å¤§éª‚]',
                  src:`${this.$store.state.baseURL}/eoim/10.png`
                },
                {
                  alt:'[å¾®ç¬‘]',
                  src:`${this.$store.state.baseURL}/eoim/11.png`
                },
                {
                  alt:'[è‰²]',
                  src:`${this.$store.state.baseURL}/eoim/12.png`
                },
                {
                  alt:'[äº²äº²]',
                  src:`${this.$store.state.baseURL}/eoim/13.png`
                },
                {
                  alt:'[å–èŒ]',
                  src:`${this.$store.state.baseURL}/eoim/14.png`
                },
                {
                  alt:'[è°ƒçš®]',
                  src:`${this.$store.state.baseURL}/eoim/15.png`
                },
                {
                  alt:'[å€’éœ‰]',
                  src:`${this.$store.state.baseURL}/eoim/16.png`
                },
                {
                  alt:'[ç”Ÿç—…]',
                  src:`${this.$store.state.baseURL}/eoim/17.png`
                },
                {
                  alt:'[åƒç“œ]',
                  src:`${this.$store.state.baseURL}/eoim/18.png`
                },
                {
                  alt:'[å¯æ€œ]',
                  src:`${this.$store.state.baseURL}/eoim/19.png`
                },
                {
                  alt:'[æ±—]',
                  src:`${this.$store.state.baseURL}/eoim/20.png`
                },
                {
                  alt:'[è‰²è‰²]',
                  src:`${this.$store.state.baseURL}/eoim/21.png`
                },
                {
                  alt:'[å“ˆå“ˆ]',
                  src:`${this.$store.state.baseURL}/eoim/22.png`
                },
                {
                  alt:'[é’±]',
                  src:`${this.$store.state.baseURL}/eoim/23.png`
                },
                {
                  alt:'[æ€è€ƒ]',
                  src:`${this.$store.state.baseURL}/eoim/24.png`
                },
                {
                  alt:'[ç”Ÿç—…]',
                  src:`${this.$store.state.baseURL}/eoim/25.png`
                },
                {
                  alt:'[å›°]',
                  src:`${this.$store.state.baseURL}/eoim/26.png`
                },
                {
                  alt:'[äº’ç²‰]',
                  src:`${this.$store.state.baseURL}/eoim/27.png`
                },
                {
                  alt:'[çŒç¡]',
                  src:`${this.$store.state.baseURL}/eoim/28.png`
                },
                {
                  alt:'[æœºæ™º]',
                  src:`${this.$store.state.baseURL}/eoim/29.png`
                },
                {
                  alt:'[å®³ç¾]',
                  src:`${this.$store.state.baseURL}/eoim/30.png`
                },
                {
                  alt:'[é¼»å­”]',
                  src:`${this.$store.state.baseURL}/eoim/31.png`
                },
                {
                  alt:'[ç–‘æƒ‘]',
                  src:`${this.$store.state.baseURL}/eoim/32.png`
                },
                {
                  alt:'[å¤§å“­]',
                  src:`${this.$store.state.baseURL}/eoim/33.png`
                },
                {
                  alt:'[æ‰“ä½ ]',
                  src:`${this.$store.state.baseURL}/eoim/34.png`
                },
                {
                  alt:'[æŒ£æ‰]',
                  src:`${this.$store.state.baseURL}/eoim/35.png`
                },
                {
                  alt:'[å¤§ç¬‘]',
                  src:`${this.$store.state.baseURL}/eoim/36.png`
                },
                {
                  alt:'[åƒæƒŠ]',
                  src:`${this.$store.state.baseURL}/eoim/37.png`
                },
                {
                  alt:'[æ™•ä¹]',
                  src:`${this.$store.state.baseURL}/eoim/38.png`
                },
                {
                  alt:'[é„™è§†]',
                  src:`${this.$store.state.baseURL}/eoim/39.png`
                },
                {
                  alt:'[å«Œå¼ƒ]',
                  src:`${this.$store.state.baseURL}/eoim/40.png`
                },
                {
                  alt:'[å“ˆæ¬ ]',
                  src:`${this.$store.state.baseURL}/eoim/41.png`
                },
                {
                  alt:'[å“­]',
                  src:`${this.$store.state.baseURL}/eoim/42.png`
                },
                {
                  alt:'[ç”Ÿæ°”]',
                  src:`${this.$store.state.baseURL}/eoim/43.png`
                },
              ]
            },
            {
              // tab çš„æ ‡é¢˜
              title: 'emoji',
              // type -> 'emoji' / 'image'
              type: 'emoji',
              // content -> æ•°ç»„
              content: ['ğŸ˜€', 'ğŸ˜ƒ', 'ğŸ˜„', 'ğŸ˜', 'ğŸ˜†','ğŸ˜€','ğŸ˜','ğŸ˜‚','ğŸ˜ƒ','ğŸ˜„','ğŸ˜…','ğŸ˜†','ğŸ˜‰','ğŸ˜Š','ğŸ˜‹','ğŸ˜','ğŸ˜','ğŸ˜˜','ğŸ˜—','ğŸ˜™','ğŸ˜š',
                'â˜º','ğŸ˜‡','ğŸ˜','ğŸ˜‘','ğŸ˜¶','ğŸ˜','ğŸ˜£','ğŸ˜¥','ğŸ˜®','ğŸ˜¯','ğŸ˜ª','ğŸ˜«','ğŸ˜´','ğŸ˜Œ','ğŸ˜›','ğŸ˜œ','ğŸ˜','ğŸ˜’','ğŸ˜“','ğŸ˜”','ğŸ˜•','ğŸ˜²',
                'ğŸ˜·','ğŸ˜–','ğŸ˜','ğŸ˜Ÿ','ğŸ˜¤','ğŸ˜¢','ğŸ˜­','ğŸ˜¦','ğŸ˜§','ğŸ˜¨','ğŸ˜¬','ğŸ˜°','ğŸ˜±','ğŸ˜³','ğŸ˜µ','ğŸ˜¡','ğŸ˜ ']
            }
          ];
          editor.customConfig.menus = [
            'head',  // æ ‡é¢˜
            'bold',  // ç²—ä½“
            'fontSize',  // å­—å·
            'fontName',  // å­—ä½“
            'italic',  // æ–œä½“
            'underline',  // ä¸‹åˆ’çº¿
            'strikeThrough',  // åˆ é™¤çº¿
            'foreColor',  // æ–‡å­—é¢œè‰²
            'backColor',  // èƒŒæ™¯é¢œè‰²
            'link',  // æ’å…¥é“¾æ¥
            'list',  // åˆ—è¡¨
            'justify',  // å¯¹é½æ–¹å¼
            'quote',  // å¼•ç”¨
            'emoticon',  // è¡¨æƒ…
            'table',  // è¡¨æ ¼
            'undo',  // æ’¤é”€
            'redo'  // é‡å¤
          ];
          //é…ç½®æœåŠ¡å™¨ç«¯åœ°å€
          //editor.customConfig.uploadImgServer = 'http://localhost:3000/activityEdit';
          editor.create();
        },
        handleAvatarSuccess(res, file) {
          this.imageUrl = URL.createObjectURL(file.raw);
        },
        beforeAvatarUpload(file) {
          const isJPG = file.type === 'image/jpeg';
          const isLt2M = file.size / 1024 / 1024 < 2;

          if (!isJPG) {
            this.$message.error('ä¸Šä¼ å¤´åƒå›¾ç‰‡åªèƒ½æ˜¯ JPG æ ¼å¼!');
          }
          if (!isLt2M) {
            this.$message.error('ä¸Šä¼ å¤´åƒå›¾ç‰‡å¤§å°ä¸èƒ½è¶…è¿‡ 2MB!');
          }
          return isJPG && isLt2M;
        }
      },
      mounted(){
        this.createEdioter();
      }
    }
</script>

<style scoped>
  .form-box{
    width: 500px;
  }
  .avatar-uploader .el-upload {
    border: 1px dashed #d9d9d9;
    border-radius: 6px;
    cursor: pointer;
    position: relative;
    overflow: hidden;
  }
  .avatar-uploader .el-upload:hover {
    border-color: #409EFF;
  }
  .avatar-uploader-icon {
    font-size: 28px;
    color: #8c939d;
    width: 178px;
    height: 178px;
    line-height: 178px;
    text-align: center;
  }
  .avatar {
    width: 178px;
    height: 178px;
    display: block;
  }
</style>
